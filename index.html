<!--
 * @Author: your name
 * @Date: 2020-03-18 23:07:44
 * @LastEditTime: 2020-03-18 23:36:21
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /huayun/index.html
 -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>test</title>
  </head>
  <body style="text-align: center;padding-top: 100px;">
     <div style="width: 300px;height: 300px;">
    <video id="video" width="300px" height="300px" autoplay="autoplay"></video>
  </div>
  <div id="btn" onclick="handlePlay()">play</div>
   
     <script>
    function handlePlay() {
      document.querySelector('#video').play()
    }

    function getMedia() {
      navigator.mediaDevices.getUserMedia({video: true, audio: true })
      .then(function(stream) {
        document.querySelector('#video').srcObject = stream;
         
        /* 使用这个 stream stream */
      })
      .catch(function(err) {
        alert(JSON.stringify(err))
        /* 处理 error */
      });
    }

    setTimeout(() => {
      getMedia()
    }, 3000)
  </script>
  </body>
</html>
