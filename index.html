<!--
 * @Author: your name
 * @Date: 2020-03-18 23:07:44
 * @LastEditTime: 2020-03-18 23:36:21
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /huayun/index.html
 -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>test</title>
  </head>
  <body style="text-align: center;padding-top: 100px;">
    <div style="width: 300px;height: 300px;">
    <video id="video" width="300px" height="300px" autoplay="autoplay" playsinline ="true" webkit-playsinline ="true"></video>
  </div>
  <div id="btn" onclick="handlePlay()">play</div>
   
   <script>
    function handlePlay() {
      document.querySelector('#video').play()
    }

    function getMedia() {
      navigator.mediaDevices.getUserMedia({video: true, audio: true })
      .then(function(stream) {
        document.querySelector('#video').srcObject = stream;
        /* 使用这个 stream stream */
       document.querySelector('#video')。onloadedmetadata = function() {
        const simulationDiv = document.createElement('div');
        document.body.appendChild(simulationDiv)
        simulationDiv.click();
        document.querySelector('#video').play()
        document.body.removeChild(simulationDiv)
       }
      })
      .catch(function(err) {
        console.log('err',err)
        /* 处理 error */
      });
    }
    
    setTimeout(() => { getMedia() }, 1000)
  </script>
  </body>
</html>
